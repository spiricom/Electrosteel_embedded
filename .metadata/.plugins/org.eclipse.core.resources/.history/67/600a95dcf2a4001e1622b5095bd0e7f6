/*
 * additive.c
 *
 *  Created on: Dec 27, 2023
 *      Author: jeffsnyder
 */




#include "main.h"
#include "leaf.h"
#include "codec.h"
#include "i2c.h"
#include "gpio.h"
#include "spi.h"
#include "parameters.h"
#include "audiostream.h"
#include "arm_math.h"
#include "additive.h"




void __ATTR_ITCMRAM audioInitAdditive()
{

	for (int i = 0; i < NUM_STRINGS_PER_BOARD; i++)
	{

		for (int j = 0; j < NUM_OVERTONES; j++)
		{
			tCycle_init(&additive[i][j], &leaf);
			tADSRT_init(&additiveEnv[i][j], 5.0f, partialDecays[j] * 1000.0f, 0.0f, 150.0f, decayExpBuffer, DECAY_EXP_BUFFER_SIZE, &leaf);
		}
		//tExpSmooth_init(&stringFreqSmoothers[i],1.0f, 0.05f, &leaf);

	}

}


void __ATTR_ITCMRAM audioFreeAdditive()
{

}

void __ATTR_ITCMRAM audioFrameAdditive(uint16_t buffer_offset)
{

}



float __ATTR_ITCMRAM audioTickAdditive(void)
{

}
